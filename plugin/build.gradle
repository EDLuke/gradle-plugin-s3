/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Gradle plugin project to get you started.
 * For more details take a look at the Writing Custom Plugins chapter in the Gradle
 * User Manual available at https://docs.gradle.org/7.2/userguide/custom_plugins.html
 */

plugins {
    // Apply the Java Gradle plugin development plugin to add support for developing Gradle plugins
    id 'java-gradle-plugin'

    // Apply the Groovy plugin to add support for Groovy
    id 'groovy'

    // Publish
    id 'maven-publish'                                
    id 'com.gradle.plugin-publish' version '0.14.0'   
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

dependencies {
    // Use the awesome Spock testing and specification framework
    testImplementation 'org.spockframework:spock-core:2.0-groovy-3.0'

    // https://mvnrepository.com/artifact/com.amazonaws/aws-java-sdk-s3
    implementation 'com.amazonaws:aws-java-sdk-s3:1.12.101'
}

// tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).configureEach {
//   kotlinOptions {
//     jvmTarget = "1.8"
//   }
// }

tasks.withType(JavaCompile).configureEach {
  sourceCompatibility = JavaVersion.VERSION_1_8
  targetCompatibility = JavaVersion.VERSION_1_8
}

// https://docs.gradle.org/current/userguide/publishing_gradle_plugins.html
group = 'com.latch.android.gradle' 
version = '1.1'  

gradlePlugin {
    // Define the plugin
    plugins {
        androidS3Plugin {
            id = 'com.latch.android.gradle'
            displayName = 'Android S3 Uploader'
            description = 'A simple light weight Gradle plugin for Android project to upload apk of all the build variants to AWS S3. This helps you to maintain all flavour of every version easily in S3. For usage, please visit docs for usage.' 
            implementationClass = 'com.latch.android.gradle.AndroidS3Plugin'
        }
    }
}

pluginBundle {
    website = 'https://github.com/EDLuke/gradle-plugin-s3' 
    vcsUrl = 'https://github.com/EDLuke/gradle-plugin-s3.git' 
    tags = ['AWS', 'S3', 'Android', 'APK']     
}